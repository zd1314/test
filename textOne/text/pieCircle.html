<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>多环图</title>
  <style>
    body {
      background: #0e143b
    }
  </style>
</head>

<body>
  <script src='../d3.v4.min.js'></script>
  <script>
    let width = 500, height = 500;
    let color = ['#0187fb', '#11cbf6', '#fff030'];
    let r = 80, R = 90;
    let data = [{
      name: '马云',
      value: 50.33
    }, {
      name: '马华腾',
      value: 25.73
    }, {
      name: '李彦宏',
      value: 23.01
    }]
    let pie = d3.pie().value(function (d) {
      return d.value
    }).sort(null)
    let pieData = pie(data)
    let dataArr = [], obj = {}
    pieData.map(s => {
      obj = {
        trueNum: s.value,
        vrNum: 100 - s.value
      }
      dataArr.push(Object.values(obj))
    })
    function arc(r, R, start, end) {
      let arcs = d3.arc()
        .innerRadius(r)
        .outerRadius(R)
        .startAngle(start)
        .endAngle(end)
      return arcs()
    }

    let svg = d3.select('body').append('svg')
      .attr('width', width)
      .attr('height', height)
      .attr('transform', `translate(${width / 2} ${height / 2})`)
      .append('g')
      .attr('class', 'outer-box')
      .attr('transform', `translate(${width / 2} ${height / 2})`)
    // let linear = d3.scaleLinear()

    let g = svg.selectAll('g').data(dataArr).enter().append('g')
    //画path
    g.append('path')
      .attr('d', function (d, i) {
        return arc(105 - 15 * (i + 1) - 15 * i, 105 - 15 * i - 15 * i, 0, Math.PI * 2)
      })
      .attr('fill', 'pink')
    g.append('path')
      .attr('d', function (d, i) {
        return arc(105 - 15 * (i + 1) - 15 * i, 105 - 15 * i - 15 * i, Math.PI * 2, Math.PI / 2.5)
      })
      .attr('fill', function (d, i) {
        return color[i]
      })
  </script>
</body>

</html>